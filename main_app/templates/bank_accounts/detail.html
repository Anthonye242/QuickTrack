{% extends 'home.html' %}

{% block content %}
<h2>{{ bank_account.name }}</h2>
<p>Balance: ${{ bank_account.balance }}</p>

<!-- Transactions Section -->
<h3>Transactions</h3>
<a href="{% url 'transaction-create' %}?account_id={{ bank_account.id }}">Add Transaction</a>

<ul class="list-group mt-3">
    {% for transaction in transactions %}
    <li class="list-group-item">
        {{ transaction.date }} - {{ transaction.description }} - ${{ transaction.amount }}
        <a href="{% url 'transaction-update' transaction.id %}" class="btn btn-sm btn-secondary">Edit</a>
        <a href="{% url 'transaction-delete' transaction.id %}" class="btn btn-sm btn-danger">Delete</a>
    </li>
    {% empty %}
    <li class="list-group-item">No transactions found.</li>
    {% endfor %}
</ul>

<!-- Budgets Section -->
<h3 class="mt-4">Budgets</h3>
<a href="{% url 'budget-create' %}?account_id={{ bank_account.id }}" class="btn btn-primary mb-3">Create New Budget</a>

{% for budget in budgets %}
    <div class="mb-3">
        <h4>{{ budget.name }} - ${{ budget.amount }}</h4>
        <p>{{ budget.start_date }} to {{ budget.end_date }}</p>
        <a href="{% url 'budget-update' budget.id %}" class="btn btn-sm btn-secondary">Edit Budget</a>
        <a href="{% url 'budget-delete' budget.id %}" class="btn btn-sm btn-danger">Delete Budget</a>
    </div>
{% empty %}
    <p>No budgets found for this account.</p>
{% endfor %}

<!-- Expenses Section -->
<h3 class="mt-4">Expenses</h3>
<a href="{% url 'expense-create' %}?account_id={{ bank_account.id }}" class="btn btn-primary mb-3">Add Expense</a>

<ul class="list-group mt-3">
    {% for expense in expenses %}
    <li class="list-group-item">
        {{ expense.date }} - {{ expense.description }} - ${{ expense.amount }}
        {% if expense.budget %}
            (Budget: {{ expense.budget.name }})
        {% else %}
            (No Budget)
        {% endif %}
        <a href="{% url 'expense-update' expense.id %}" class="btn btn-sm btn-secondary">Edit</a>
        <a href="{% url 'expense-delete' expense.id %}" class="btn btn-sm btn-danger">Delete</a>
    </li>
    {% empty %}
    <li class="list-group-item">No expenses found for this account.</li>
    {% endfor %}
</ul>

<a href="{% url 'bank-account-update' bank_account.id %}" class="btn btn-secondary mt-3">Edit Account</a>
<a href="{% url 'bank-account-delete' bank_account.id %}" class="btn btn-danger mt-3">Delete Account</a>
{% endblock %}
